@page "{type}/{id}"
@model SenseNet.IndexTools.Web.Pages.Reports.ViewReportModel
@{
    ViewData["Title"] = "View Report";
}

<div class="container">
    <div class="row mb-4">
        <div class="col">
            <h1>@Model.ReportTitle</h1>
            <p class="text-muted">
                Created: @Model.ReportMetadata?.CreatedAt.ToString("g")
            </p>
        </div>
    </div>

    <div class="row mb-4">
        <div class="col">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5>Report Details</h5>
                    <div>
                        <a asp-page="/Reports/Index" class="btn btn-sm btn-outline-secondary">Back to Reports</a>
                        <a href="#" class="btn btn-sm btn-outline-primary" onclick="window.print()">Print</a>
                    </div>
                </div>
                <div class="card-body">
                    @if (Model.ReportType == "lastactivity")
                    {
                        <partial name="_LastActivityReportView" model="Model.ReportData as SenseNet.IndexTools.Core.Models.LastActivityReport" />
                    }
                    else if (Model.ReportType == "validation")
                    {
                        <partial name="_ValidationReportView" model="Model.ReportData as SenseNet.IndexTools.Core.Models.ValidationReport" />
                    }
                    else if (Model.ReportType == "subtree")
                    {
                        <partial name="_SubtreeReportView" model="Model.ReportData as SenseNet.IndexTools.Core.Models.SubtreeReport" />
                    }
                    else
                    {
                        <div class="alert alert-warning">
                            Unknown report type: @Model.ReportType
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <div class="card">
                <div class="card-header">
                    <h5>Parameters</h5>
                </div>
                <div class="card-body">
                    <dl class="row">
                        @foreach (var param in Model.ReportMetadata?.Parameters ?? new Dictionary<string, string>())
                        {
                            <dt class="col-sm-3">@param.Key</dt>
                            <dd class="col-sm-9">@param.Value</dd>
                        }
                    </dl>
                </div>
            </div>
        </div>
    </div>
</div>
